# 应用设计说明

嵌入式开发技术总体来说是一门应用于产品的技术，无论是u-boot, 内核，文件系统，驱动，包括应用都只是系统构成的一部分。嵌入式设备可以通过检测一系列外部行为，实现具体的服务。换句话说，嵌入式系统的产品开发可以说是为了实现从数据输入(包含不限于传感器，串口，网络等)到输出(输出不限于GUI，网络，机械运动，继电器通断)的过程。在应用开发时，根据产品的需求，去分析产品输入和输出接口，这样可以更清晰的理解应用开发，如果在学习中带着这种思想，也更容易理解在做什么，为什么这么做。这个说法有些抽象，不过这里举些日常生活中的产品例子来帮助理解。

空调遥控器就是比较简单的电子设备，大部分都会用单片机开发，产品功能理解也比较单一，方便理解。遥控器的目的就是实现空调的控温和工作模式，不过这只是需求，按照产品设计的角度去分析遥控器的工作模式，可以很清晰的理解。

1. 遥控器的输入，遥控器是通过按键来控制空调的，没有其它输入方式，所以按键就是唯一的输入。
2. 遥控器的输出，为了控制空调，需要有信号输出，所以给空调发送信号的发送器是一路输出，遥控器为UI显示当前设备的配置和状态，因此屏幕也是一路输出

当然上面只是设计的功能，那么对于产品就要进一步的去对应到硬件和功能上。

1. 按键输入, 根据遥控器支持的具体功能，如开关机，温度调节，工作模式调节，风速调节，定时模式等，需要多个I/O的实现，这时就需要类似3x3矩阵键盘的设计来节省I/O
2. 空调信号输出，传统空调通过红外信号通讯，支持通讯协议，因此要通过I/O实现红外协议的支持
3. 屏幕输出，选择不同接口(SPI, I2C或并口屏), 实现UI，并能够根据按键控制界面显示

对于遥控器的开发，就转换成了如下内容。

- 按键I/O检测，按键扫描驱动实现和事件触发
  - 按键的检测引脚或者中断触发(GPIO, EXTI, Interrupt)
  - 按键扫描的逻辑解析
- 红外通讯命令协议实现
  - 红外发射器管理驱动
  - 红外命令组包和发送控制
- UI界面实现，控制接口实现
  - 屏幕驱动支持(SPI/I2c/并口协议)
  - 界面UI绘制(字符库，图形库等)
- 按键事件触发对于红外命令发送命令的支持和图形重绘
  - 引脚检测转换为事件
  - 事件触发红外命令的执行
  - 事件触发图形显示的重绘

当然这只是产品软件开发方面的需求，对于真正的产品还需要外包装的设计，结构的设计实现，硬件电路的设计实现，给用户提供可靠，耐用，美观的服务体验，不过本系列以软件为核心，其它部分有兴趣可以自己去了解学习。上面从空调遥控器的角度去刨析了如何去理解电子产品中的嵌入式开发，虽然这个应用比较简单，但实际上也包含着产品开发的完整体系。学会如何从全局到局部，再系统的梳理

## next_chapter

[返回目录](./SUMMARY.md)

直接开始下一节说明: [ch04-01.Linux应用API接口](./ch04-01.linux_api_interface.md)
