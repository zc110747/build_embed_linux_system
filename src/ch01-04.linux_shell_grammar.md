# 综述

对于完整的shell语法，是不可能一篇文章讲完，甚至一本书也远远不够，即使在嵌入式行业已经从事多年，也不是各方面都了解。因为这不仅是一套指令语法，还包含各类程序和命令功能说明，只能依靠日常使用中积累掌握，正如上所说，这里我们也按照shell命令和脚本语法两部分进行总结.

这里本篇列出参考文档或者书籍.

- Linux命令行和Shell脚本编程大全(第四版)
- 鸟哥的Linux私房菜 基础学习篇

## Shell语法

虽然日常使用linux的环境下，都是直接使用命令操作，来完成文件夹创建，文件下载，创建，处理，解压，删除等工作，不过在维护linux平台时，这类指令操作往往多且繁杂，为了统一处理这类问题，linux提供一套shell语法，可以通过可执行文件来处理这些任务，这就是常见的shell语法。

- [shell for](#for)
- [shell input](#input)
- [shell if](#if)
- [shell read](#read)

### for

循环语句，遍历结束后停止

```shell
#遍历/etc/profile.d/的sh文件
for i int /etc/profile.d/*.sh; do
    if [ -r $i ]; then
        echo $i
    fi
done
unset i
```

### input

shell脚本输入变量通过$n(n=1,2...)获取输入值

```shell
#$1, $2表示文件输入值
#如 ./test.sh test1 test2
#则 $1=test1, $2=test2 
echo "input 1 value is $1"
echo "input 2 value is $2"
```

### if

if语法是在linux脚本中最常见的语法，如检测某个脚本，库或目录不存在，执行其它分支，可以说是脚本中最重要的应用语法之一，其格式如下.

```shell
# if [ command ]; then 
#       dothings
# elif [ command ]; then -- 可省略
#       dothings
# else
#       dothings
# fi
```

其中command主要包含如下部分.

```shell
#文件或者目录判断
[ -a FILE ] 如果文件存在则为真。
[ -d FILE ] 如果文件存在且是一个目录则返回为真。
[ -e FILE ] 如果指定的文件或目录存在时返回为真。
[ -f FILE ] 如果文件存在且是一个普通文件则返回为真。
[ -r FILE ] 如果文件存在且是可读的则返回。
[ -x FILE ] 如果文件存在且是可执行的则返回为真.
[ -w FILE ] 如果文件存在且是可写的则返回为真。

# 字符串判断
[ -z STRING ] 如果STRING的长度为零则返回为真，即空是真
[ -n STRING ] 如果STRING的长度非零则返回为真，即非空是真
[ STRING1 ]　 如果字符串不为空则返回为真,与-n类似
[ STRING1 == STRING2 ] 如果两个字符串相同则返回为真
[ STRING1 != STRING2 ] 如果字符串不相同则返回为真
[ STRING1 < STRING2 ] 如果 “STRING1”字典排序在“STRING2”前面则返回为真。
[ STRING1 > STRING2 ] 如果 “STRING1”字典排序在“STRING2”后面则返回为真

# 数值判断
[ INT1 -eq INT2 ] INT1和INT2两数相等返回为真
[ INT1 -ne INT2 ] INT1和INT2两数不等返回为真
[ INT1 -gt INT2 ] INT1大于INT2返回为真
[ INT1 -ge INT2 ] INT1大于等于INT2返回为真
[ INT1 -lt INT2 ] INT1小于INT2返回为真
[ INT1 -le INT2 ] INT1小于等于INT2返回为真

#逻辑判断
[ ! EXPR ] 逻辑非，如果 EXPR 是false则返回为真。
[ EXPR1 -a EXPR2 ] 逻辑与，如果 EXPR1 and EXPR2 全真则返回为真。
[ EXPR1 -o EXPR2 ] 逻辑或，如果 EXPR1 或者 EXPR2 为真则返回为真。
[ EXPR ] || [ EXPR ] 用OR来合并两个条件
[ EXPR ] && [ EXPR ] 用AND来合并两个条件
```

基于上述命令配合，下面展示一些常用的命令组合。

```shell
#检测目录是否在PATH中
echo $PATH
if [ -d "$1" ] && echo $PATH | grep -E -q "(^|:)$1($|:)"; then
    echo "directory $1 in PATH"
else
    echo "directory $1 not in PATH"
fi
```

### read

读取命令行输入的值

```shell
#读取外部数据，存储到input_val中
read -p "inpnt command:" input_val
```
