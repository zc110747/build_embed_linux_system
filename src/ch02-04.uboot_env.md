# uboot_env

## uboot_support_command

支持的主要command列表

- [command](#command)
- [filesystem](#filesystem)
- [bootrun](#bootrun)
- [environment](#environment)
- [address](#address)

### command

command主要是U-boot运行显示状态信息，执行动作的命令。

```shell
?         - alias for 'help'
bdinfo    - print Board Info structure
dhcp      - boot image via network using DHCP/TFTP protocol
echo      - echo args to console
    format: echo $env
exit      - exit script
help      - print command description/usage
iminfo    - print header information for application image
ln        - Create a symbolic link
loop      - infinite loop on address range
ls        - list files in a directory (default /)
ping      - send ICMP ECHO_REQUEST to network host
protect   - enable or disable FLASH write protection
pxe       - commands to get and boot from pxe files
panic     - Panic with optional message
reset     - Perform RESET of the CPU
run       - run commands in an environment variable
showvar   - print local hushshell variables
test      - minimal test like /bin/sh
version   - print monitor, compiler and linker version
source    - run script from memory
```

### filesystem

filesystem主要处理从文件系统中读取，显示，写入，创建，删除文件的动作。

```shell
erase     - erase FLASH memory
ext2load  - load binary file from a Ext2 filesystem
ext2ls    - list files in a directory (default /)
ext4load  - load binary file from a Ext4 filesystem
ext4ls    - list files in a directory (default /)
ext4size  - determine a file's size
fatinfo   - print information about filesystem
fatload   - load binary file from a dos filesystem
fatls     - list files in a directory (default /)
fatmkdir  - create a directory
fatrm     - delete a file
fatsize   - determine a file's size
fatwrite  - write file into a dos filesystem
fdt       - flattened device tree utility commands
flinfo    - print FLASH memory information
fstype    - Look up a filesystem type
fstypes   - List supported filesystem types
load      - load binary file from a filesystem
mmc       - MMC sub system
mmcinfo   - display MMC info
net       - NET sub-system
part      - disk partition related commands
save      - save file to a filesystem
ubi       - ubi commands
ubifsload - load file from an UBIFS filesystem
ubifsls   - list files in a directory
ubifsmount- mount UBIFS volume
ubifsumount- unmount UBIFS volume
```

### bootrun

boot主要实现跳转到内存只读地址执行文件。

```shell
bootefi   - Boots an EFI payload from memory
bootelf   - Boot from an ELF image in memory
bootm     - boot application image from memory
bootp     - boot image via network using BOOTP/TFTP protocol
bootvx    - Boot vxWorks from an ELF image
bootz     - boot Linux zImage image from memory
bootm: 用于启动跳转legacy和FIT格式的内核
booti: 用于启动跳转AARCH64格式的内核
bootz: 用于启动跳转ARM格式的内核
sysboot   - command to get and boot from syslinux files
tftpboot  - boot image via network using TFTP protocol
```

定义路径: include/command.h

```shell
#格式
bootz [initrd_addr] - [fdt_addr]

#举例
bootz 80800000 - 83000000;
```

### environment

environment主要管理系统环境变量。

```shell
env       - environment handling commands
saveenv   - save environment variables to persistent storage
setenv    - set environment variables
printenv  - print environment variables
```

功能说明: 管理环境变量的统一函数接口
定义路径: cmd/nvedit

```shell
#恢复默认环境变量
env default -a

#打印指定系统环境变量，等同于printenv
env print [-a | name ...]

#删除创建的指定系统环境变量
env delete [name]

#保存系统环境变量，等同于saveenv
env save

#设置系统环境变量，等同于setenv
env set [name] [arg...]
```

### address

address主要处理memory里的数据。

```shell
base      - print or set address offset
blkcache  - block cache diagnostics and control
cmp       - memory compare
    format: cmp addr1 addr2 count
cp        - memory copy
    format: cp source target count
crc32     - checksum calculation
    format: crc32 address count [addr]
go        - start application at address 'addr'
md        - memory display
mii       - MII utility commands
mm        - memory modify (auto-incrementing address)
random    - fill memory with random pattern
nm        - memory modify (constant address)
mw        - memory write (fill)
size      - determine a file's size
```

## next_chapter

[返回目录](./SUMMARY.md)

直接开始下一小节: [ch02-05.uboot执行流程分析](./ch02-05.uboot_analyse.md)
